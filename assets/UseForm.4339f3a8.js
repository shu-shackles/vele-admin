var Q=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var G=(e,t,r)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))oe.call(t,r)&&G(e,r,t[r]);if(U)for(var r of U(t))ae.call(t,r)&&G(e,r,t[r]);return e},O=(e,t)=>ee(e,te(t));import{s as E,R as A,G as p,r as y,o as u,j as f,I as m,t as C,u as V,F as R,S as re,J as D,K as j,L as z,C as n,T as le,U as ne,W as $,z as F,y as H,N as P,X as N,Y as se,Z as ue,_ as ce,$ as ie,a0 as me,a1 as de,a2 as pe,a3 as fe,a4 as be,a5 as ge,a6 as _e,a7 as ve,a8 as he,B as k,H as J,a9 as ye,aa as K,ab as ke,ac as Ee,ad as Ve,D as L,P as w}from"./vendor.f4dfb3f7.js";import{i as I,a as Pe}from"./index.6ae83b1c.js";const Ce=E({props:{options:{type:Array,default:[]}},setup(e){const t=e,r=A(),c=p(()=>g(g({},t),r));return(o,l)=>{const a=y("ElOption"),s=y("ElSelect");return u(),f(s,j(z(n(c))),{default:m(()=>[t.options.length?(u(!0),C(R,{key:0},V(t.options,_=>(u(),f(a,{key:_.value,label:_.label,value:_.value},null,8,["label","value"]))),128)):re("",!0),D(o.$slots,"default")]),_:3},16)}}});var W=(e=>(e.Checkbox="Checkbox",e.CheckboxButton="CheckboxButton",e))(W||{}),X=(e=>(e.Radio="Radio",e.RadioButton="RadioButton",e))(X||{});const Re=E({props:{modelValue:{type:Array,required:!0},options:{type:Array,default:[]},type:{type:String,default:"Checkbox"}},setup(e){const t=e,r=p(()=>{const o=t.options;return o.length?I(o[0])?o.map(l=>({label:l,value:l})):o:[]}),c=p(()=>t.type===W.CheckboxButton?le:ne);return(o,l)=>{const a=y("el-checkbox-group");return u(),f(a,P({modelValue:e.modelValue,"onUpdate:modelValue":l[0]||(l[0]=s=>N(modelValue)?modelValue.value=s:null)},o.$attrs),{default:m(()=>[(u(!0),C(R,null,V(n(r),s=>(u(),f($(n(c)),{key:s.value,label:s.value},{default:m(()=>[F(H(s.label),1)]),_:2},1032,["label"]))),128))]),_:1},16,["modelValue"])}}}),Fe=E({props:{modelValue:{type:String,required:!0},options:{type:Array,default:[]},type:{type:String,default:"Radio"}},setup(e){const t=e,r=p(()=>{const o=t.options;return o.length?I(o[0])?o.map(l=>({label:l,value:l})):o:[]}),c=p(()=>t.type===X.RadioButton?se:ue);return(o,l)=>{const a=y("el-radio-group");return u(),f(a,P({modelValue:e.modelValue,"onUpdate:modelValue":l[0]||(l[0]=s=>N(modelValue)?modelValue.value=s:null)},o.$attrs),{default:m(()=>[(u(!0),C(R,null,V(n(r),s=>(u(),f($(n(c)),{key:s.value,label:s.value},{default:m(()=>[F(H(s.label),1)]),_:2},1032,["label"]))),128))]),_:1},16,["modelValue"])}}}),i=new Map;i.set("Input",ce);i.set("InputNumber",ie);i.set("Select",Ce);i.set("RadioGroup",Fe);i.set("CheckboxGroup",Re);i.set("Cascader",me);i.set("DatePicker",de);i.set("TimePicker",pe);i.set("TimeSelect",fe);i.set("Switch",be);i.set("Upload",ge);i.set("Slider",_e);i.set("Rate",ve);i.set("Divider",he);const Be=E({props:{schema:null,formProps:null,setFormModel:null},setup(e){const t=e,r=A(),c=k(),{component:o,field:l,label:a}=t.schema,s=p(()=>!I(a)),_=p(()=>g({},t.schema.componentProps)),h=p({get(){return t.formProps.model[l]},set(d){t.setFormModel(l,d)}}),v=p(()=>{const d=O(g({},r),{prop:l});return I(a)&&(d.label=a),d});function B(){return t.schema.render?t.schema.render:i.get(o)}return(d,x)=>(u(),f(n(ye),P({ref_key:"formItemRef",ref:c},n(v)),J({default:m(()=>[(u(),f($(B()),P({modelValue:n(h),"onUpdate:modelValue":x[0]||(x[0]=S=>N(h)?h.value=S:null)},n(_)),null,16,["modelValue"]))]),_:2},[n(s)?{name:"label",fn:m(()=>[(u(),f($(n(a))))])}:void 0]),1040))}});function xe({formElRef:e}){async function t(){await n(e).resetFields(),K(()=>r())}async function r(o){await n(e).clearValidate(o)}async function c(o){return await n(e).validate(o)}return{resetFields:t,clearValidate:r,validate:c}}const Se=E({emits:["register"],setup(e,{expose:t,emit:r}){const c=e,o=A(),l=k({}),a=k(null),s=p(()=>g(g(g({},o),c),l.value)),_=p(()=>{const{schemas:b}=n(l);return b||[]}),{validate:h,resetFields:v,clearValidate:B}=xe({propsRef:l,formElRef:a});function d(b,T){l.value.model&&(l.value.model[b]=T)}function x(b){l.value=g(g({},l.value),b)}const S={setProps:x,validate:h,resetFields:v,clearValidate:B};return t(S),ke(()=>{r("register",S)}),(b,T)=>{const Y=y("el-form");return u(),f(Y,P({ref_key:"formRef",ref:a},n(s)),{default:m(()=>[D(b.$slots,"formHeader"),(u(!0),C(R,null,V(n(_),M=>(u(),f(Be,{key:M.field,schema:M,formProps:l.value,setFormModel:d},J({_:2},[V(Object.keys(b.$slots),q=>({name:q,fn:m(Z=>[D(b.$slots,q,j(z(Z||{})))])}))]),1032,["schema","formProps"]))),128)),D(b.$slots,"formFooter")]),_:3},16)}}}),we={}.VITE_GLOB_APP_TITLE;function De(e){throw new Error(`[${we} error]: ${e}`)}function $e(e){const t=k(null),r=k(!1);function c(a){Ee(()=>{t.value=null,r.value=null}),!(n(r)&&Pe()&&a===n(t))&&(t.value=a,r.value=!0,Ve(()=>e,()=>{e&&a.setProps(e)},{immediate:!0,deep:!0}))}async function o(){const a=n(t);return a||De("The form instance has not been obtained, please make sure that the form has been rendered when performing the form operation!"),await K(),a}return{register:c,methods:{async setProps(a){(await o()).setProps(a)},async validate(a){(await o()).validate(a)},async resetFields(){(await o()).resetFields()},async clearValidate(){(await o()).clearValidate()}}}}const Ie=F("submitForm"),Ae=F("resetForm"),Ne=F("clearValidate"),Ue=E({setup(e){const t=[{field:"name",label:"\u59D3\u540D",component:"Input"},{field:"age",label:"\u5E74\u7EAA",component:"InputNumber"},{field:"city",label:"\u57CE\u5E02",component:"Select",componentProps:{options:[{label:"\u676D\u5DDE",value:1},{label:"\u4E0A\u6D77",value:2}]}},{field:"sex",label:"\u6027\u522B",component:"RadioGroup",componentProps:{options:[{label:"\u7537",value:1},{label:"\u5973",value:2}]}},{field:"like",label:"\u7231\u597D",component:"CheckboxGroup",componentProps:{options:[{label:"\u8DB3\u7403",value:1},{label:"\u7BEE\u7403",value:2},{label:"\u6E38\u6CF3",value:3}]}},{field:"date",label:"\u751F\u65E5",component:"DatePicker"}],r=L({name:"111",age:void 0,city:null,sex:null,like:[],date:""}),c=L({name:[{required:!0,message:"Please input name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],age:[{required:!0,message:"Please input age",trigger:"blur"}],like:[{type:"array",required:!0,message:"Please select like",trigger:"blur"}],sex:[{type:"number",required:!0,message:"Please select sex",trigger:"blur"}],city:[{type:"number",required:!0,message:"Please input city",trigger:"blur"}]}),{register:o,methods:l}=$e({model:r,rules:c,schemas:t}),a=k(),s=()=>{l.validate(v=>{if(v)console.log("submit!",v);else return console.log("error submit!",v),!1})},_=()=>{a.value.resetFields()},h=()=>{a.value.clearValidate()};return(v,B)=>{const d=y("ElButton");return u(),C(R,null,[w(n(Se),{ref_key:"formRef",ref:a,onRegister:n(o)},null,8,["onRegister"]),w(d,{onClick:s},{default:m(()=>[Ie]),_:1}),w(d,{onClick:_},{default:m(()=>[Ae]),_:1}),w(d,{onClick:h},{default:m(()=>[Ne]),_:1})],64)}}});export{Ue as default};
