var te=Object.defineProperty,oe=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var L=(e,t,r)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))le.call(t,r)&&L(e,r,t[r]);if(O)for(var r of O(t))re.call(t,r)&&L(e,r,t[r]);return e},j=(e,t)=>oe(e,ae(t));import{s as k,R as A,G as p,r as y,o as u,j as f,I as m,t as P,u as E,F as C,S as se,J as x,K as T,L as I,C as n,T as ne,U as ue,W as R,z as B,y as H,N as D,X as M,Y as ie,Z as ce,_ as de,$ as me,a0 as pe,a1 as fe,a2 as ge,a3 as be,a4 as ve,a5 as _e,a6 as he,a7 as ye,a8 as ke,H as J,a9 as Ve,aa as K,B as F,ab as Ee,ac as Fe,ad as Pe,D as z,P as w}from"./vendor.b2176963.js";import{i as S,a as Ce}from"./index.b4d31e53.js";import{t as Be}from"./log.b4d653eb.js";const we=k({props:{options:{type:Array,default:[]}},setup(e){const t=e,r=A(),i=p(()=>b(b({},t),r));return(a,l)=>{const o=y("ElOption"),s=y("ElSelect");return u(),f(s,T(I(n(i))),{default:m(()=>[t.options.length?(u(!0),P(C,{key:0},E(t.options,d=>(u(),f(o,{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128)):se("",!0),x(a.$slots,"default")]),_:3},16)}}});var W=(e=>(e.Checkbox="Checkbox",e.CheckboxButton="CheckboxButton",e))(W||{}),X=(e=>(e.Radio="Radio",e.RadioButton="RadioButton",e))(X||{});const xe=k({props:{modelValue:{type:Array,required:!0},options:{type:Array,default:[]},type:{type:String,default:"Checkbox"}},setup(e){const t=e,r=p(()=>{const a=t.options;return a.length?S(a[0])?a.map(l=>({label:l,value:l})):a:[]}),i=p(()=>t.type===W.CheckboxButton?ne:ue);return(a,l)=>{const o=y("el-checkbox-group");return u(),f(o,D({modelValue:e.modelValue,"onUpdate:modelValue":l[0]||(l[0]=s=>M(modelValue)?modelValue.value=s:null)},a.$attrs),{default:m(()=>[(u(!0),P(C,null,E(n(r),s=>(u(),f(R(n(i)),{key:s.value,label:s.value},{default:m(()=>[B(H(s.label),1)]),_:2},1032,["label"]))),128))]),_:1},16,["modelValue"])}}}),Re=k({props:{modelValue:{type:String,required:!0},options:{type:Array,default:[]},type:{type:String,default:"Radio"}},setup(e){const t=e,r=p(()=>{const a=t.options;return a.length?S(a[0])?a.map(l=>({label:l,value:l})):a:[]}),i=p(()=>t.type===X.RadioButton?ie:ce);return(a,l)=>{const o=y("el-radio-group");return u(),f(o,D({modelValue:e.modelValue,"onUpdate:modelValue":l[0]||(l[0]=s=>M(modelValue)?modelValue.value=s:null)},a.$attrs),{default:m(()=>[(u(!0),P(C,null,E(n(r),s=>(u(),f(R(n(i)),{key:s.value,label:s.value},{default:m(()=>[B(H(s.label),1)]),_:2},1032,["label"]))),128))]),_:1},16,["modelValue"])}}}),c=new Map;c.set("Input",de);c.set("InputNumber",me);c.set("Select",we);c.set("RadioGroup",Re);c.set("CheckboxGroup",xe);c.set("Cascader",pe);c.set("DatePicker",fe);c.set("TimePicker",ge);c.set("TimeSelect",be);c.set("Switch",ve);c.set("Upload",_e);c.set("Slider",he);c.set("Rate",ye);c.set("Divider",ke);const Se=k({props:{schema:null,formProps:null,setFormModel:null},setup(e){const t=e,r=A(),{component:i,field:a,label:l}=t.schema,o=p(()=>!S(l)),s=p(()=>b({},t.schema.componentProps)),d=p({get(){return t.formProps.model[a]},set(_){t.setFormModel(a,_)}}),V=p(()=>{const _=j(b({},r),{prop:a});return S(l)&&(_.label=l),_});function v(){return t.schema.render?t.schema.render:c.get(i)}return(_,h)=>(u(),f(n(Ve),T(I(n(V))),J({default:m(()=>[(u(),f(R(v()),D({modelValue:n(d),"onUpdate:modelValue":h[0]||(h[0]=$=>M(d)?d.value=$:null)},n(s)),null,16,["modelValue"]))]),_:2},[n(o)?{name:"label",fn:m(()=>[(u(),f(R(n(l))))])}:void 0]),1040))}});function De({formElRef:e}){async function t(){await n(e).resetFields(),K(()=>r())}async function r(o){await n(e).clearValidate(o)}async function i(o){return await n(e).validate(o)}async function a(o,s){return await n(e).validateField(o,s)}async function l(o){return await n(e).scrollToField(o)}return{resetFields:t,clearValidate:r,validate:i,validateField:a,scrollToField:l}}const $e=k({emits:["register"],setup(e,{expose:t,emit:r}){const i=e,a=A(),l=F({}),o=F(null),s=p(()=>b(b(b({},a),i),l.value)),d=p(()=>{const{schemas:g}=n(l);return g||[]}),{validate:V,resetFields:v,clearValidate:_,scrollToField:h,validateField:$}=De({propsRef:l,formElRef:o});function Y(g,q){l.value.model&&(l.value.model[g]=q)}function Z(g){l.value=b(b({},l.value),g)}const N={setProps:Z,validate:V,resetFields:v,clearValidate:_,scrollToField:h,validateField:$};return t(N),Ee(()=>{r("register",N)}),(g,q)=>{const Q=y("el-form");return u(),f(Q,D({ref_key:"formRef",ref:o},n(s)),{default:m(()=>[x(g.$slots,"formHeader"),(u(!0),P(C,null,E(n(d),U=>(u(),f(Se,{key:U.field,schema:U,formProps:l.value,setFormModel:Y},J({_:2},[E(Object.keys(g.$slots),G=>({name:G,fn:m(ee=>[x(g.$slots,G,T(I(ee||{})))])}))]),1032,["schema","formProps"]))),128)),x(g.$slots,"formFooter")]),_:3},16)}}});function Ae(e){const t=F(null),r=F(!1);function i(o){Fe(()=>{t.value=null,r.value=null}),!(n(r)&&Ce()&&o===n(t))&&(t.value=o,r.value=!0,Pe(()=>e,()=>{e&&o.setProps(e)},{immediate:!0,deep:!0}))}async function a(){const o=n(t);return o||Be("The form instance has not been obtained, please make sure that the form has been rendered when performing the form operation!"),await K(),o}return{register:i,methods:{async setProps(o){(await a()).setProps(o)},async validate(o){(await a()).validate(o)},async validateField(o,s){(await a()).validateField(o,s)},async resetFields(){(await a()).resetFields()},async clearValidate(){(await a()).clearValidate()},async scrollToField(o){(await a()).scrollToField(o)}}}}const Te=B("submitForm"),Ie=B("resetForm"),Me=B("clearValidate"),Oe=k({setup(e){const t=[{field:"name",label:"\u59D3\u540D",component:"Input"},{field:"age",label:"\u5E74\u7EAA",component:"InputNumber"},{field:"city",label:"\u57CE\u5E02",component:"Select",componentProps:{options:[{label:"\u676D\u5DDE",value:1},{label:"\u4E0A\u6D77",value:2}]}},{field:"sex",label:"\u6027\u522B",component:"RadioGroup",componentProps:{options:[{label:"\u7537",value:1},{label:"\u5973",value:2}]}},{field:"like",label:"\u7231\u597D",component:"CheckboxGroup",componentProps:{options:[{label:"\u8DB3\u7403",value:1},{label:"\u7BEE\u7403",value:2},{label:"\u6E38\u6CF3",value:3}]}},{field:"date",label:"\u751F\u65E5",component:"DatePicker"}],r=z({name:"111",age:void 0,city:null,sex:null,like:[],date:""}),i=z({name:[{required:!0,message:"Please input name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],age:[{required:!0,message:"Please input age",trigger:"blur"}],like:[{type:"array",required:!0,message:"Please select like",trigger:"change"}],sex:[{type:"number",required:!0,message:"Please select sex",trigger:"change"}],city:[{type:"number",required:!0,message:"Please input city",trigger:"blur"}]}),{register:a,methods:l}=Ae({model:r,rules:i,schemas:t}),o=F(),s=()=>{l.validate(v=>{if(v)console.log("submit!",v);else return console.log("error submit!",v),!1})},d=()=>{o.value.resetFields()},V=()=>{o.value.clearValidate()};return(v,_)=>{const h=y("ElButton");return u(),P(C,null,[w(n($e),{ref_key:"formRef",ref:o,onRegister:n(a)},null,8,["onRegister"]),w(h,{onClick:s},{default:m(()=>[Te]),_:1}),w(h,{onClick:d},{default:m(()=>[Ie]),_:1}),w(h,{onClick:V},{default:m(()=>[Me]),_:1})],64)}}});export{Oe as default};
