var te=Object.defineProperty,oe=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var L=(e,t,r)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))le.call(t,r)&&L(e,r,t[r]);if(O)for(var r of O(t))re.call(t,r)&&L(e,r,t[r]);return e},j=(e,t)=>oe(e,ae(t));import{s as k,R as T,G as p,r as y,o as u,j as f,I as m,t as P,u as V,F as C,S as ne,J as x,K as A,L as I,C as s,T as se,U as ue,W as R,z as w,y as H,N as D,X as N,Y as ce,Z as ie,_ as de,$ as me,a0 as pe,a1 as fe,a2 as ge,a3 as be,a4 as ve,a5 as _e,a6 as he,a7 as ye,a8 as ke,H as J,a9 as Ee,aa as K,B as F,ab as Ve,ac as Fe,ad as Pe,D as z,P as B}from"./vendor.f4dfb3f7.js";import{i as S,a as Ce}from"./index.da886b0a.js";const we=k({props:{options:{type:Array,default:[]}},setup(e){const t=e,r=T(),c=p(()=>b(b({},t),r));return(a,l)=>{const o=y("ElOption"),n=y("ElSelect");return u(),f(n,A(I(s(c))),{default:m(()=>[t.options.length?(u(!0),P(C,{key:0},V(t.options,d=>(u(),f(o,{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128)):ne("",!0),x(a.$slots,"default")]),_:3},16)}}});var W=(e=>(e.Checkbox="Checkbox",e.CheckboxButton="CheckboxButton",e))(W||{}),X=(e=>(e.Radio="Radio",e.RadioButton="RadioButton",e))(X||{});const Be=k({props:{modelValue:{type:Array,required:!0},options:{type:Array,default:[]},type:{type:String,default:"Checkbox"}},setup(e){const t=e,r=p(()=>{const a=t.options;return a.length?S(a[0])?a.map(l=>({label:l,value:l})):a:[]}),c=p(()=>t.type===W.CheckboxButton?se:ue);return(a,l)=>{const o=y("el-checkbox-group");return u(),f(o,D({modelValue:e.modelValue,"onUpdate:modelValue":l[0]||(l[0]=n=>N(modelValue)?modelValue.value=n:null)},a.$attrs),{default:m(()=>[(u(!0),P(C,null,V(s(r),n=>(u(),f(R(s(c)),{key:n.value,label:n.value},{default:m(()=>[w(H(n.label),1)]),_:2},1032,["label"]))),128))]),_:1},16,["modelValue"])}}}),xe=k({props:{modelValue:{type:String,required:!0},options:{type:Array,default:[]},type:{type:String,default:"Radio"}},setup(e){const t=e,r=p(()=>{const a=t.options;return a.length?S(a[0])?a.map(l=>({label:l,value:l})):a:[]}),c=p(()=>t.type===X.RadioButton?ce:ie);return(a,l)=>{const o=y("el-radio-group");return u(),f(o,D({modelValue:e.modelValue,"onUpdate:modelValue":l[0]||(l[0]=n=>N(modelValue)?modelValue.value=n:null)},a.$attrs),{default:m(()=>[(u(!0),P(C,null,V(s(r),n=>(u(),f(R(s(c)),{key:n.value,label:n.value},{default:m(()=>[w(H(n.label),1)]),_:2},1032,["label"]))),128))]),_:1},16,["modelValue"])}}}),i=new Map;i.set("Input",de);i.set("InputNumber",me);i.set("Select",we);i.set("RadioGroup",xe);i.set("CheckboxGroup",Be);i.set("Cascader",pe);i.set("DatePicker",fe);i.set("TimePicker",ge);i.set("TimeSelect",be);i.set("Switch",ve);i.set("Upload",_e);i.set("Slider",he);i.set("Rate",ye);i.set("Divider",ke);const Re=k({props:{schema:null,formProps:null,setFormModel:null},setup(e){const t=e,r=T(),{component:c,field:a,label:l}=t.schema,o=p(()=>!S(l)),n=p(()=>b({},t.schema.componentProps)),d=p({get(){return t.formProps.model[a]},set(_){t.setFormModel(a,_)}}),E=p(()=>{const _=j(b({},r),{prop:a});return S(l)&&(_.label=l),_});function v(){return t.schema.render?t.schema.render:i.get(c)}return(_,h)=>(u(),f(s(Ee),A(I(s(E))),J({default:m(()=>[(u(),f(R(v()),D({modelValue:s(d),"onUpdate:modelValue":h[0]||(h[0]=$=>N(d)?d.value=$:null)},s(n)),null,16,["modelValue"]))]),_:2},[s(o)?{name:"label",fn:m(()=>[(u(),f(R(s(l))))])}:void 0]),1040))}});function Se({formElRef:e}){async function t(){await s(e).resetFields(),K(()=>r())}async function r(o){await s(e).clearValidate(o)}async function c(o){return await s(e).validate(o)}async function a(o,n){return await s(e).validateField(o,n)}async function l(o){return await s(e).scrollToField(o)}return{resetFields:t,clearValidate:r,validate:c,validateField:a,scrollToField:l}}const De=k({emits:["register"],setup(e,{expose:t,emit:r}){const c=e,a=T(),l=F({}),o=F(null),n=p(()=>b(b(b({},a),c),l.value)),d=p(()=>{const{schemas:g}=s(l);return g||[]}),{validate:E,resetFields:v,clearValidate:_,scrollToField:h,validateField:$}=Se({propsRef:l,formElRef:o});function Y(g,q){l.value.model&&(l.value.model[g]=q)}function Z(g){l.value=b(b({},l.value),g)}const M={setProps:Z,validate:E,resetFields:v,clearValidate:_,scrollToField:h,validateField:$};return t(M),Ve(()=>{r("register",M)}),(g,q)=>{const Q=y("el-form");return u(),f(Q,D({ref_key:"formRef",ref:o},s(n)),{default:m(()=>[x(g.$slots,"formHeader"),(u(!0),P(C,null,V(s(d),U=>(u(),f(Re,{key:U.field,schema:U,formProps:l.value,setFormModel:Y},J({_:2},[V(Object.keys(g.$slots),G=>({name:G,fn:m(ee=>[x(g.$slots,G,A(I(ee||{})))])}))]),1032,["schema","formProps"]))),128)),x(g.$slots,"formFooter")]),_:3},16)}}}),$e={}.VITE_GLOB_APP_TITLE;function Te(e){throw new Error(`[${$e} error]: ${e}`)}function Ae(e){const t=F(null),r=F(!1);function c(o){Fe(()=>{t.value=null,r.value=null}),!(s(r)&&Ce()&&o===s(t))&&(t.value=o,r.value=!0,Pe(()=>e,()=>{e&&o.setProps(e)},{immediate:!0,deep:!0}))}async function a(){const o=s(t);return o||Te("The form instance has not been obtained, please make sure that the form has been rendered when performing the form operation!"),await K(),o}return{register:c,methods:{async setProps(o){(await a()).setProps(o)},async validate(o){(await a()).validate(o)},async validateField(o,n){(await a()).validateField(o,n)},async resetFields(){(await a()).resetFields()},async clearValidate(){(await a()).clearValidate()},async scrollToField(o){(await a()).scrollToField(o)}}}}const Ie=w("submitForm"),Ne=w("resetForm"),Me=w("clearValidate"),Oe=k({setup(e){const t=[{field:"name",label:"\u59D3\u540D",component:"Input"},{field:"age",label:"\u5E74\u7EAA",component:"InputNumber"},{field:"city",label:"\u57CE\u5E02",component:"Select",componentProps:{options:[{label:"\u676D\u5DDE",value:1},{label:"\u4E0A\u6D77",value:2}]}},{field:"sex",label:"\u6027\u522B",component:"RadioGroup",componentProps:{options:[{label:"\u7537",value:1},{label:"\u5973",value:2}]}},{field:"like",label:"\u7231\u597D",component:"CheckboxGroup",componentProps:{options:[{label:"\u8DB3\u7403",value:1},{label:"\u7BEE\u7403",value:2},{label:"\u6E38\u6CF3",value:3}]}},{field:"date",label:"\u751F\u65E5",component:"DatePicker"}],r=z({name:"111",age:void 0,city:null,sex:null,like:[],date:""}),c=z({name:[{required:!0,message:"Please input name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],age:[{required:!0,message:"Please input age",trigger:"blur"}],like:[{type:"array",required:!0,message:"Please select like",trigger:"change"}],sex:[{type:"number",required:!0,message:"Please select sex",trigger:"change"}],city:[{type:"number",required:!0,message:"Please input city",trigger:"blur"}]}),{register:a,methods:l}=Ae({model:r,rules:c,schemas:t}),o=F(),n=()=>{l.validate(v=>{if(v)console.log("submit!",v);else return console.log("error submit!",v),!1})},d=()=>{o.value.resetFields()},E=()=>{o.value.clearValidate()};return(v,_)=>{const h=y("ElButton");return u(),P(C,null,[B(s(De),{ref_key:"formRef",ref:o,onRegister:s(a)},null,8,["onRegister"]),B(h,{onClick:n},{default:m(()=>[Ie]),_:1}),B(h,{onClick:d},{default:m(()=>[Ne]),_:1}),B(h,{onClick:E},{default:m(()=>[Me]),_:1})],64)}}});export{Oe as default};
